<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciamento de Documentação Técnica</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css"> 
</head>
<body>

<div class="container-fluid p-4">
    <h1 class="mb-4">Gerenciador de Documentação Técnica (Express/Mongo)</h1>
    
    <div id="alert-messages" class="mb-3"></div>

    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="crud-tab" data-bs-toggle="tab" data-bs-target="#crud" type="button" role="tab" aria-controls="crud" aria-selected="true">Gerenciamento (CRUD)</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="visualizar-tab" data-bs-toggle="tab" data-bs-target="#visualizar" type="button" role="tab" aria-controls="visualizar" aria-selected="false">Visualizar Documento</button>
        </li>
    </ul>

    <div class="tab-content" id="myTabContent">
        
        <div class="tab-pane fade show active" id="crud" role="tabpanel" aria-labelledby="crud-tab">
            
            <div id="document-list" class="my-4">
                <h2>Documentos Existentes</h2>
                
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>Identificador</th>
                            <th>Título</th>
                            <th>Última Atualização</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="docs-table-body">
                        </tbody>
                </table>
                <button class="btn btn-primary" onclick="showEditForm('new')">Criar Novo Documento</button>
            </div>

            <div id="document-form-container" class="mt-5 border p-4 bg-light" style="display:none;">
                <h2 class="mb-3">
                    <span id="form-action-label">Criar</span> Documento: <span id="form-identifier-display"></span>
                </h2>
                <form id="doc-form">
                    <input type="hidden" id="docId"> 

                    <div class="mb-3">
                        <label for="tituloDocumento" class="form-label">Título do Documento</label>
                        <input type="text" class="form-control" id="tituloDocumento" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="identificador" class="form-label">Identificador (Ex: RACK001-FISICO)</label>
                        <input type="text" class="form-control" id="identificador" required>
                    </div>

                    <div class="mb-3">
                        <label for="document-json-body" class="form-label">Corpo do Documento (JSON Completo da Propriedade `secoes`)</label>
                        <textarea class="form-control" id="document-json-body" rows="15" required 
                                  placeholder='Cole aqui o JSON array para a propriedade "secoes". Ex: [{"tituloSecao": "...", "tipoConteudo": "...", "conteudo": {...}}, ...]'>
                        </textarea>
                        <div class="form-text">Cole o array JSON que representa o conteúdo das seções aqui.</div>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <div>
                            <button type="button" class="btn btn-success me-2" onclick="saveDocument()">Salvar Documento</button>
                            <button type="button" class="btn btn-secondary" onclick="cancelEdit()">Cancelar</button>
                        </div>
                        <button type="button" class="btn btn-danger" id="delete-btn" onclick="deleteDocument()">Deletar Documento</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="tab-pane fade" id="visualizar" role="tabpanel" aria-labelledby="visualizar-tab">
            <div id="document-render" class="p-4 mt-3 border bg-white">
                <p class="text-center text-muted">Selecione um documento na tabela acima e clique em "Visualizar" ou clique na aba "Visualizar Documento" após o carregamento inicial.</p>
                
                <div id="doc-content">
                    
                </div>
            </div>
        </div>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="script.js"></script>

</body>
</html>